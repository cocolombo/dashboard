<div class="bg-gray-800 rounded-lg p-4 shadow-lg border border-gray-700 flex flex-col group/widget mb-6 transition-all duration-300"
     id="widget-{{ widget.id }}"
     data-id="{{ widget.id }}">

    <div class="widget-handle flex justify-between items-center mb-3 border-b border-gray-600 pb-2 cursor-move select-none">

        {% include "partials/widget_title.html" %}

        <div class="flex items-center space-x-1">
            <button onclick="openAllLinks('{{ widget.id }}')"
                    class="text-gray-500 hover:text-purple-400 font-bold text-lg px-2 transition-colors cursor-pointer"
                    title="Ouvrir tous les liens">â‡±</button>

            <button onclick="showWidgetMenu(event, '{{ widget.id }}')"
                    class="text-gray-500 hover:text-blue-400 font-bold text-lg px-2 transition-colors cursor-pointer"
                    title="DÃ©placer">âžœ</button>

            <button onclick="confirmDeleteWidget('{{ widget.id }}')"
                    class="text-gray-500 hover:text-red-500 font-bold text-lg px-2 transition-colors cursor-pointer"
                    title="Supprimer">ðŸ—‘</button>

            <button onclick="toggleForm('form-{{ widget.id }}')"
                    class="text-gray-500 hover:text-green-400 font-bold text-2xl leading-none px-2 transition-colors cursor-pointer"
                    title="Ajouter">+</button>
        </div>
    </div>

    <div class="widget-content">

        <form id="form-{{ widget.id }}" action="{% url 'add_link' widget.id %}" method="POST" class="hidden mb-3 bg-gray-900 p-3 rounded border border-gray-600">
            {% csrf_token %}
            <input type="text" name="title" placeholder="Titre" required class="w-full mb-2 bg-gray-800 text-white px-2 py-1 rounded border border-gray-700">
            <input type="url" name="url" placeholder="URL" required class="w-full mb-2 bg-gray-800 text-white px-2 py-1 rounded border border-gray-700">
            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-500 text-white py-1 rounded text-sm">Ajouter</button>
        </form>

        <ul class="sortable-list space-y-0 flex-1 min-h-[20px]" data-widget-id="{{ widget.id }}">
            {% for link in widget.links.all %}
                {% include "partials/link_item.html" %}
            {% endfor %}
        </ul>
    </div>
</div>
